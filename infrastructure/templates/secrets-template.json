{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "metadata": {
    "description": "Template for MeatGeek Key Vault secrets. Copy this file to secrets.local.json and fill in actual values."
  },
  "secrets": {
    "shared": {
      "IoTServiceConnection": {
        "value": "HostName=<your-iot-hub>.azure-devices.net;SharedAccessKeyName=service;SharedAccessKey=<your-key>",
        "description": "IoT Hub service connection string",
        "required": true
      },
      "IoTEventHubEndpoint": {
        "value": "Endpoint=sb://<your-eventhub-namespace>.servicebus.windows.net/;SharedAccessKeyName=<key-name>;SharedAccessKey=<your-key>",
        "description": "IoT Hub Event Hub-compatible endpoint",
        "required": true
      },
      "IoTSharedAccessConnString": {
        "value": "HostName=<your-iot-hub>.azure-devices.net;SharedAccessKeyName=iothubowner;SharedAccessKey=<your-key>",
        "description": "IoT Hub shared access connection string",
        "required": true
      }
    },
    "perEnvironment": {
      "RelayNamespace": {
        "value": "meatgeek-relay",
        "description": "Azure Relay namespace name",
        "generated": false
      },
      "RelayConnectionName": {
        "value": "device-relay",
        "description": "Azure Relay hybrid connection name",
        "generated": false
      },
      "RelayKeyName": {
        "value": "RootManageSharedAccessKey",
        "description": "Azure Relay SAS key name",
        "generated": false
      },
      "RelayKey": {
        "value": "<generate-or-retrieve>",
        "description": "Azure Relay SAS key",
        "generated": true
      },
      "EventGridTopicKey": {
        "value": "<auto-generated>",
        "description": "Event Grid topic access key",
        "generated": true,
        "source": "Retrieved from Event Grid topic after creation"
      }
    },
    "optional": {
      "InfernoIoTServiceConnection": {
        "value": "",
        "description": "Legacy Inferno IoT connection (if migrating)",
        "required": false
      },
      "MeatGeekIoTServiceConnection": {
        "value": "",
        "description": "Additional IoT Hub connection",
        "required": false
      }
    }
  },
  "notes": {
    "security": [
      "Never commit actual secret values to source control",
      "Use managed identities where possible instead of connection strings",
      "Rotate keys regularly using Key Vault key rotation policies",
      "Enable Key Vault audit logging"
    ],
    "automation": [
      "Secrets marked as 'generated: true' can be auto-generated",
      "Use populate-secrets.sh script for initial population",
      "GitHub Actions workflow can sync from GitHub Secrets",
      "Consider using Azure Key Vault references in app settings"
    ]
  }
}